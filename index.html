<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impostor Online - Modo Eliminaci√≥n</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <div class="app-container">
        
        <!-- HEADER -->
        <header>
            <div class="header-left">
                <h1>üïµÔ∏è Impostor</h1>
                <div id="roundBadge" class="badge" style="display:none;">Ronda <span id="roundDisplay">1</span></div>
            </div>
            <div id="timerContainer" class="timer-box" style="display:none;">
                <i class="far fa-clock"></i> <span id="timerDisplay">00:00</span>
            </div>
        </header>

        <!-- VIEW 1: HOME -->
        <section id="view-home" class="screen active">
            <div class="card">
                <h2>Bienvenido</h2>
                <div class="input-group">
                    <label>Tu Nombre</label>
                    <input type="text" id="usernameInput" placeholder="Ej: Alex" maxlength="12">
                </div>
                <div class="tabs">
                    <button class="tab-btn active" onclick="switchTab('join')">Unirse</button>
                    <button class="tab-btn" onclick="switchTab('create')">Crear Sala</button>
                </div>
                <div id="tab-join" class="tab-content active">
                    <input type="text" id="joinCodeInput" placeholder="C√≥digo (6 letras)" maxlength="6" style="text-transform:uppercase;">
                    <button id="btnJoin" class="action-btn">Entrar a Sala</button>
                </div>
                <div id="tab-create" class="tab-content">
                    <input type="text" id="createCodeInput" placeholder="Crea C√≥digo (Ej: SALA01)" maxlength="6" style="text-transform:uppercase;">
                    <button id="btnCreate" class="action-btn outline">Crear Sala</button>
                </div>
            </div>
        </section>

        <!-- VIEW 2: LOBBY -->
        <section id="view-lobby" class="screen">
            <div class="lobby-header">
                <div>
                    <span class="label">C√ìDIGO</span>
                    <h2 id="lobbyRoomCode">------</h2>
                </div>
                <div class="player-counter">
                    <i class="fas fa-users"></i> <span id="lobbyCount">0</span>
                </div>
            </div>
            <div class="player-list-container">
                <h3>Sala de espera</h3>
                <div id="lobbyPlayerList" class="player-grid"></div>
            </div>
            <div class="lobby-footer">
                <p id="lobbyStatus" class="status-text">Esperando...</p>
                <button id="btnStartGame" class="action-btn primary" style="display:none;">
                    <i class="fas fa-play"></i> Iniciar Partida
                </button>
                <button onclick="exitGame()" class="action-btn text-only danger-text">Salir</button>
            </div>
        </section>

        <!-- VIEW 3: GAME (Word & Discussion) -->
        <section id="view-game" class="screen">
            <!-- Spectator Banner -->
            <div id="spectatorBanner" class="spectator-banner" style="display:none;">
                <i class="fas fa-ghost"></i> MODO ESPECTADOR (Est√°s eliminado)
            </div>

            <div class="game-card-container">
                <div id="cardInner" class="game-card" onclick="toggleCard()">
                    <!-- Front -->
                    <div class="card-face card-front">
                        <i class="fas fa-fingerprint icon-big"></i>
                        <h3>Tu Identidad</h3>
                        <p>Toca para revelar</p>
                    </div>
                    <!-- Back -->
                    <div class="card-face card-back">
                        <div id="roleIcon" class="role-icon"></div>
                        <h2 id="roleTitle">...</h2>
                        <div class="divider"></div>
                        <p class="category-label" id="categoryDisplay">...</p>
                        <h1 id="secretWord">...</h1>
                        <p class="instruction" id="roleInstruction">...</p>
                    </div>
                </div>
            </div>

            <!-- Info for Spectators -->
            <div id="spectatorInfoBox" class="card" style="display:none; text-align:left;">
                <h4>üëÅÔ∏è Informaci√≥n de la Sala</h4>
                <p>Impostor: <b id="specImpostorName" class="danger-text">...</b></p>
                <p>Palabra Civil: <b id="specCivilWord">...</b></p>
                <p>Palabra Impostor: <b id="specImpostorWord">...</b></p>
            </div>

            <div class="game-controls">
                <p id="gameStatusText" class="status-text">Lee tu palabra y discute.</p>
                <!-- Host Control: Force Vote -->
                <button id="btnForceVote" class="action-btn warning" style="display:none;">
                    <i class="fas fa-gavel"></i> Forzar Votaci√≥n Ahora
                </button>
            </div>
        </section>

        <!-- VIEW 4: VOTING -->
        <section id="view-voting" class="screen">
            <h2>üì¢ Hora de Votar</h2>
            <p class="subtitle">Elige a qui√©n eliminar. ¬°Cuidado!</p>
            
            <div id="votingList" class="voting-grid"></div>
            <p id="voteStatus" class="status-text">Esperando votos...</p>
        </section>

        <!-- VIEW 5: ROUND RESULTS (Elimination) -->
        <section id="view-elimination" class="screen">
            <div class="card result-card">
                <i class="fas fa-skull-crossbones icon-big danger-text"></i>
                <h2>Jugador Eliminado</h2>
                <h1 id="eliminatedName" class="big-name">...</h1>
                <p class="subtitle">¬øEra el impostor?</p>
                <div class="divider"></div>
                <p id="eliminationReveal">No lo sabremos hasta el final...</p>
            </div>
            
            <div class="game-controls">
                <p class="status-text">El juego contin√∫a...</p>
                <button id="btnNextRound" class="action-btn primary" style="display:none;">Siguiente Ronda</button>
            </div>
        </section>

        <!-- VIEW 6: GAME OVER -->
        <section id="view-gameover" class="screen">
            <div class="result-banner" id="gameOverBanner">
                <h1 id="gameOverTitle">FIN DEL JUEGO</h1>
                <p id="gameOverSubtitle">...</p>
            </div>

            <div class="card result-details">
                <h3>Revelaci√≥n</h3>
                <p>El Impostor era: <b id="finalImpostorName" class="danger-text">...</b></p>
                <p>Los ganadores son: <b id="finalWinners">...</b></p>
            </div>

            <button onclick="exitGame()" class="action-btn primary">Volver al Inicio</button>
        </section>

    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="app.js"></script>
</body>
</html>